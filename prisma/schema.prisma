generator client {
  provider = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String?
  name      String?
  avatar    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Google Drive Tokens
  googleRefreshToken String?
  googleAccessToken  String?
  googleExpiryDate   BigInt?

  // Instagram Tokens
  instagramAccessToken String?
  instagramUserId      String?

  posts Post[]
}

model Post {
  id            String   @id @default(uuid())
  userId        String
  user          User     @relation(fields: [userId], references: [id])
  videoUrl      String   // Google Drive File ID
  videoName     String?
  caption       String?
  scheduledTime DateTime
  status        PostStatus @default(PENDING)
  instagramPostId String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

enum PostStatus {
  PENDING
  POSTED
  FAILED
}
